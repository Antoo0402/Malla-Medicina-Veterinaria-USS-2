<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Malla Medicina Veterinaria USS</title>
  <link rel="stylesheet" href="estilos.css">
</head>
<body>
  <h1>Malla Medicina Veterinaria USS</h1>
  <div class="malla-container" id="malla"></div>
  <script>
    const malla = [
      {
        semestre: "1er Semestre",
        cursos: [
          { nombre: "Biología celular", abre: ["Bioquímica General", "Anatomía Veterinaria 1", "Histología Veterinaria", "Genética Ganadera"], requisitos: [] },
          { nombre: "Química General y Orgánico", abre: ["Bioquímica General"], requisitos: [] },
          { nombre: "Física Médica", abre: ["Métodos complementarios de diagnóstico"], requisitos: [] },
          { nombre: "Matemáticas", abre: ["Genética Ganadera", "Economía"], requisitos: [] },
          { nombre: "Orientación profesional", abre: ["Bienestar animal"], requisitos: [] },
          { nombre: "Estrategia para el aprendizaje", abre: [], requisitos: [] }
        ]
      },
      {
        semestre: "2do Semestre",
        cursos: [
          { nombre: "Bioquímica General", abre: ["Fisiología Animal", "Microbiología General"], requisitos: ["Biología celular", "Química General y Orgánico"] },
          { nombre: "Anatomía Veterinaria 1", abre: ["Anatomía Veterinaria 2"], requisitos: ["Biología celular"] },
          { nombre: "Histología Veterinaria", abre: ["Fisiología Animal", "Inmunología"], requisitos: ["Biología celular"] },
          { nombre: "Zoología Veterinaria", abre: ["Ecología", "Enfermedades parasitarias"], requisitos: [] },
          { nombre: "Bienestar animal", abre: ["Fisiología Animal", "Inmunología", "Sistema de producción de carne"], requisitos: ["Orientación profesional"] },
          { nombre: "Inglés Instrumental 1", abre: ["Inglés Instrumental 2"], requisitos: [] }
        ]
      },
      {
        semestre: "3er Semestre",
        cursos: [
          { nombre: "Antropología", abre: ["Ética"], requisitos: [] },
          { nombre: "Ecología", abre: ["Producción de forraje", "Conservación de la vida silvestre"], requisitos: ["Zoología Veterinaria"] },
          { nombre: "Fisiología Animal", abre: ["Fisiopatología Animal", "Reproducción animal", "Enfermedades infecciosas", "Patología general"], requisitos: ["Bioquímica General", "Histología Veterinaria", "Bienestar animal"] },
          { nombre: "Anatomía Veterinaria 2", abre: [], requisitos: ["Anatomía Veterinaria 1"] },
          { nombre: "Microbiología General", abre: ["Enfermedades infecciosas"], requisitos: ["Bioquímica General"] },
          { nombre: "Inmunología", abre: ["Fisiopatología Animal", "Enfermedades infecciosas"], requisitos: ["Histología Veterinaria", "Bienestar animal"] },
          { nombre: "Genética Ganadera", abre: ["Sistema de producción de carne", "Sistema de producción de leche"], requisitos: ["Matemáticas", "Biología celular"] },
          { nombre: "Inglés Instrumental 2", abre: [], requisitos: ["Inglés Instrumental 1"] }
        ]
      }
      // Continúa desde aquí con los siguientes semestres si lo deseas
    ];

    const state = {
      aprobadas: {},
    };

    document.addEventListener('DOMContentLoaded', () => {
      renderMalla();
    });

    function renderMalla() {
      const container = document.getElementById('malla');
      container.innerHTML = '';

      malla.forEach(sem => {
        const columna = document.createElement('div');
        columna.className = 'semestre';

        const titulo = document.createElement('h2');
        titulo.textContent = sem.semestre;
        columna.appendChild(titulo);

        sem.cursos.forEach(curso => {
          const div = document.createElement('div');
          div.className = 'curso';
          div.textContent = curso.nombre;
          div.dataset.nombre = curso.nombre;

          if (!estaDisponible(curso)) div.classList.add('bloqueado');
          if (state.aprobadas[curso.nombre]) div.classList.add('aprobado');

          div.addEventListener('click', () => {
            if (div.classList.contains('bloqueado')) return;
            toggleCurso(curso.nombre);
          });

          columna.appendChild(div);
        });

        container.appendChild(columna);
      });
    }

    function estaDisponible(curso) {
      if (!curso.requisitos || curso.requisitos.length === 0) return true;
      return curso.requisitos.every(req => state.aprobadas[req]);
    }

    function toggleCurso(nombre) {
      if (state.aprobadas[nombre]) {
        delete state.aprobadas[nombre];
      } else {
        state.aprobadas[nombre] = true;
      }
      renderMalla();
    }
  </script>
</body>
</html>
